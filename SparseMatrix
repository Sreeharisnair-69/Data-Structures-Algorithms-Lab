#include <stdio.h>
int main(){
	int row,col,size1=0,size2=0;
	printf("Enter the no of row :");
	scanf("%d",&row);
	printf("Enter no of columns :");
	scanf("%d",&col);
	int mat1[row][col],mat2[row][col];
	printf("\n");
	printf("Enter elements of sparse matrix 1 :\n");
	//enter elements
	for (int i=0;i<row;i++){
		for(int j=0;j<col;j++){
			printf("Enter element %d%d :",i,j);
			scanf("%d",&mat1[i][j]);
			
		}	
	}	
	printf("Enter elements of sparse matrix 2 :\n");
	for (int i=0;i<row;i++){
		for(int j=0;j<col;j++){
			printf("Enter element %d%d :",i,j);
			scanf("%d",&mat2[i][j]);
		}	
	}
	//print elements
	printf("The matrix are :\n");
	printf("MATRIX 1\n");
	for (int i=0;i<row;i++){
		for(int j=0;j<col;j++){
			printf("%d\t",mat1[i][j]);
			if(mat1[i][j]!=0){
			        size1+=1;
		}}
		printf("\n");	
	}	
	printf("MATRIX 2\n");
	for (int i=0;i<row;i++){
		for(int j=0;j<col;j++){
			printf("%d\t",mat2[i][j]);
			if(mat2[i][j]!=0){
			        size2+=1;
		}}
		printf("\n");	
	}
	int com1[size1][3],com2[size2][3],q=0;
	//compact matrix initialization
	for (int i=0;i<row;i++){
		for(int j=0;j<col;j++){
			if(mat1[i][j]!=0){
			          com1[q][0]=i;
			          com1[q][1]=j;
			          com1[q][2]=mat1[i][j];
			          q++;
			    }
			}
	}
	q=0;
	for (int i=0;i<row;i++){
		for(int j=0;j<col;j++){
			if(mat2[i][j]!=0){
			          com2[q][0]=i;
			          com2[q][1]=j;
			          com2[q][2]=mat2[i][j];
			          q++;
			    }
			}
	}
	//print compact matrix
	printf("COMPACT 1\n");
	for(int a=0;a<size1;a++){
            for(int b=0;b<3;b++){
              printf("%d\t",com1[a][b]);
            }
            printf("\n");
        }
        printf("COMPACT 2\n");
	for(int a=0;a<size2;a++){
            for(int b=0;b<3;b++){
              printf("%d\t",com2[a][b]);
            }
            printf("\n");
        }
        //formation of result matrix
        int res[row][col];
        for(int i=0;i<row;i++){
          for(int j=0;j<col;j++){
            for(int k=0;k<size1;k++){
                    if(com1[k][0]==i && com1[k][1]==j){
                        res[i][j]=com1[k][2];
                        break;
                    }else{
                        res[i][j]=0;
                    }   
            }
            
          }
        }
        for(int i=0;i<row;i++){
           for(int j=0;j<col;j++){
            for(int k=0;k<size2;k++){
                if(com2[k][0]==i && com2[k][1]==j){
                    res[i][j]+=com2[k][2];
                }
            }
          }
        }
        //printing result matrix
        printf("RESULT\n");
        for(int i=0;i<row;i++){
          for(int j=0;j<col;j++){
              printf("%d\t",res[i][j]);
            }
            printf("\n");
        }
          
	return 0;
}
