#include<stdio.h>
int main(){
	int row, col;
	printf("Enter number of rows: ");
	scanf("%d",&row);
	printf("Enter number of columns: ");
	scanf("%d",&col);
	
	int mat1[row][col],mat2[row][col];
	printf("Enter elements of first matrix: \n");
	for(int i=0;i<row;i++){
		for(int j=0;j<col;j++){
			printf("Enter element at %d %d: ",i+1,j+1);
			scanf("%d",&mat1[i][j]);
		}
	}
	
	printf("Enter elements of second matrix: \n");
	for(int i=0;i<row;i++){
		for(int j=0;j<col;j++){
			printf("Enter element at %d %d: ",i+1,j+1);
			scanf("%d",&mat2[i][j]);
		}
	}
	
	printf("First Matrix\n");
	int size1=0,size2=0;
	for(int i=0;i<row;i++){
		for(int j=0;j<col;j++){
			printf("%d\t",mat1[i][j]);
			if(mat1[i][j]!=0){
				size1++;
			}
		}
		printf("\n");
	}
	
	printf("Second Matrix\n");
	for(int i=0;i<row;i++){
		for(int j=0;j<col;j++){
			printf("%d\t",mat2[i][j]);
			if(mat2[i][j]!=0){
				size2++;
			}
		}
		printf("\n");
	}
	
	//Conversion from Sparse Matrix to Compact form
	int comp1[size1][3], comp2[size2][3],row1=0,row2=0;
	for(int i=0;i<row;i++){
		for(int j=0;j<col;j++){
			if(mat1[i][j]!=0){
				comp1[row1][0]=i;
				comp1[row1][1]=j;
				comp1[row1][2]=mat1[i][j];
				row1++;
			}
		}
	}
	
	for(int i=0;i<row;i++){
		for(int j=0;j<col;j++){
			if(mat2[i][j]!=0){
				comp2[row2][0]=i;
				comp2[row2][1]=j;
				comp2[row2][2]=mat2[i][j];
				row2++;
			}
		}
	}
	//First compact matrix
	printf("First Compact Matrix\n");
	for(int i=0;i<size1;i++){
		for(int j=0;j<3;j++){
			printf("%d\t",comp1[i][j]);
		}
		printf("\n");
	}
	
	//Second compact matrix
	printf("Second Compact Matrix\n");
	for(int i=0;i<size2;i++){
		for(int j=0;j<3;j++){
			printf("%d\t",comp2[i][j]);
		}
		printf("\n");
	}
	
	int size3=0;
	if(size1>size2){
		size3=size1;
	}
	else{
		size3=size2;
	}
	
	int result[row][col];
	for(int i=0;i<row;i++){
		for(int j=0;j<col;j++){
			for(int k=0;k<size3;k++){
				if(comp1[i][0]==i && comp1[i][1]==j){
					result[i][j]=comp1[i][2];
				}
				else if(comp2[i][0]==i && comp2[i][1]==j){
					result[i][j]=comp2[i][2];
				}
				else if ((comp1[i][0]==i && comp1[i][1]==j)&&(comp2[i][0]==i && comp2[i][1]==j)){
					result[i][j]=comp1[i][2]+comp2[i][2];
				}
				else{
					result[i][j]=0;
				}
			}
		}
	}
	
	printf("Resulting Compact Matrix\n");
	for(int i=0;i<row;i++){
		for(int j=0;j<col;j++){
			printf("%d\t",result[i][j]);
		}
		printf("\n");
	}
	
	
	
	return 0;
}
	
	
